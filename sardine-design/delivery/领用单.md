### 领用单

> 指定货位、容器、批次进行出库。

#### 表结构


字段名 | 类型 | 是否为空 | 备注
---|---|---|---
UUID | VARCHAR(32) | NOT NULL | 主键
BILLNUMBER | VARCHAR（30）| NOT NULL | 单号
STATE | VARCHAR(30) | NOT NULL | 状态
SOURCEBILL | VARCHAR(100) | NULL | 来源单据，淘宝类
WRHUUID | VARCHAR(32) | NOT NULL | 仓位UUID
COMPANYUUID | VARCHAR(30) | NOT NULL | 组织ID
CUSTOMERUUID | VARCHAR(32) | NOT NULL | 客户UUID
CUSTOMERCODE | VARCHAR(30) | NOT NULL | 客户code
CUSTOMERNAME | VARCHAR(100) | NOT NULL | 客户名称
REMARK | VARCHAR(255) | NULL | 备注
CREATEDID | VARCHAR(32) | NOT NULL | 创建人
CREATEDCODE | VARCHAR(30) | NOT NULL | 创建人代码
CREATEDNAME | VARCHAR(100) | NOT NULL | 创建人名称
CREATEDTIME | DATETIME | NOT NULL | 创建时间
LASTMODIFYID | VARCHAR(32) | NOT NULL | 最后修改人ID
LASTMODIFYCODE | VARCHAR(30) | NOT NULL | 最后修改人代码
LASTMODIFYNAME | VARCHAR(100) | NOT NULL | 最后修改人名称
LASTMODIFYTIME | DATETIME | NOT NULL | 最后修改时间
VERSION | INT | NOT NULL | 版本号，初始为0，每修改一次增加1


#### 明细


字段名 | 类型 | 是否为空 | 备注
---|---|---|---
UUID | VARCHAR(32) | NOT NULL | 主键
ACCEPTANCEUUID  | VARCHAR(32) | NOT NULL | 领用单UUID
LINE | INT | NOT NULL | 行号
ARTICLEUUID | VARCHAR(32) | NOT NULL | 商品UUID
MUNIT | VARCHAR(30) | NOT NULL | 计量单位
QPCSTR | VARCHAR(30) | NOT NULL | 规格
BINCODE | VARCHAR(30) | NOT NULL | 货位
CONTAINERBARCODE | VARCHAR(30) | NOT NULL | 容器代码
PRODUCTIONDATE | DATE | NOT NULL | 生产日期
VALIDDATE | DATE | NOT NULL | 到效期
STOCKBATCH | VARCHAR(30) | NOT NULL | 批次
QTY | DECIMAL(12，3)| NOT NULL | 数量
CASEQTYSTR | VARCHAR(30) | NOT NULL | 件数 
REALQTY | DECIMAL(12，3)| NOT NULL | 实际数量
REALCASEQTYSTR | VARCHAR(30) | NOT NULL | 实际件数
PRICE | DECIMAL(12，3)| NOT NULL | 价格
AMOUNT | DECIMAL(12，3)| NOT NULL | 金额


#### 状态流

```
graph LR
A[初始]-->|批准|B[已批准]
B-->|生成指令|D[配货中]
D-->|指令完成|E[已完成]
B-->|作废|F[已作废]
```

1. 初始：新建单据
2. 批准：设置在途库存，防止当前指定的批次库存被其他配货通知单占用。
3. 配货中：领用单生成拣货指令。
4. 已完成：拣货指令处理完成。
5. 已作废：批准后可作废，作废后需要把原锁定的库存释放。